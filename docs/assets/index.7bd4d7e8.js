var m=Object.defineProperty;var f=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var l=(e,t,r)=>(f(e,typeof t!="symbol"?t+"":t,r),r);const h=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}};h();const v=()=>{const e=document.createElement("div");return e.setAttribute("class","divider"),e},C=e=>{const t=document.createElement("div");t.innerHTML=`
    <input type='text' placeholder='\uD560 \uC77C \uCD94\uAC00' id='createTodo'/>
  `;const r=t.querySelector("#createTodo");return r.addEventListener("keydown",n=>{if(n.code==="Enter"){const s=r.value;s.length>0&&e(s)}}),t},g=(e=new Date)=>{let t=e.getFullYear(),r=e.getMonth()+1;r<10&&(r=`0${r}`);let n=e.getDate();return n<10&&(n=`0${n}`),`${t}-${r}-${n}`},b=e=>{const t=document.createElement("div");return t.setAttribute("class","header"),t.innerHTML=`
    <h1>${g()}</h1>
    <p class='msg'>\uD560 \uC77C\uC774 ${e}\uAC1C \uB0A8\uC558\uC2B5\uB2C8\uB2E4</p>
  `,t};let i=-1;const y=(e,t)=>{const r=document.createElement("div");r.setAttribute("class",`todo ${e.completed?"completed":""}`),r.setAttribute("id",`todo-${e.id}`),r.innerHTML=`
    <div class='content'>
      <span class='checkbox'></span>
      ${e.id===i?`<input type='text' value='${e.title}' class='nextTitle' placeholder='\uBCC0\uACBD\uD560 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694'/>`:`<h3 class="title">${e.title}</h3>`}
    </div>
    <div class='options'>
      <button class='updateBtn'>\uBCC0\uACBD</button>
      <button class='deleteBtn'>\uC0AD\uC81C</button>
    </div>
  `,r.querySelector(".content").addEventListener("click",()=>{e.completed=!e.completed,t(e)});const n=r.querySelector(".nextTitle");return n==null||n.addEventListener("click",s=>{s.stopPropagation()}),n==null||n.addEventListener("change",()=>{i=-1,(n==null?void 0:n.value)&&(e.title=n.value),t(e)}),r.querySelector(".deleteBtn").addEventListener("click",()=>{e.id=-1,t(e)}),r.querySelector(".updateBtn").addEventListener("click",()=>{e.id!==i?i=e.id:i=-1,t(e)}),r};class p{constructor(t,r,n,s){l(this,"completed",!1);l(this,"id",-1);l(this,"title","");l(this,"userId",-1);this.completed=t,this.id=r,this.title=n,this.userId=s}static createFromJson(t){const{completed:r,id:n,title:s,userId:o}=t;return new p(r,n,s,o)}}var S=[{userId:1,id:1,title:"delectus aut autem",completed:!1},{userId:1,id:2,title:"quis ut nam facilis et officia qui",completed:!1},{userId:1,id:3,title:"fugiat veniam minus",completed:!1},{userId:1,id:4,title:"et porro tempora",completed:!0}];class E{constructor(t){l(this,"state");l(this,"observers",[]);this.state=t}setState(t){this.state=t,this.observers.forEach(r=>{r(this.state)})}addObserver(t){this.observers.push(t)}removeObserver(t){for(let r=0;r<this.observers.length;r++)if(this.observers[r]===t){this.observers.splice(r,1);break}}removeAllObservers(){for(;this.observers.length;)this.observers.pop()}}const u=document.querySelector("#app"),d=new E([]),B=e=>e.length?e[e.length-1].id+1:1,T=e=>{console.log("renderUI",e),e.every((s,o)=>s.id===-1?(e.splice(o,1),!1):!0),u.innerHTML="";const t=e.reduce((s,o)=>o.completed?s:s+1,0);u.appendChild(b(t)),u.appendChild(v());const r=document.createElement("div");u.appendChild(r),e.map(s=>{const o=y(s,c=>{console.log("update target todo",c),d.setState([...e])});r.appendChild(o)});const n=s=>{console.log(s),d.setState([...e,new p(!1,B(e),s,1)])};u.appendChild(C(n))};let a=localStorage.getItem("todoList");if(a)try{a=JSON.parse(a)}catch(e){console.error("savedTodoListData","JSON parse error",e)}const L=a||[...S],A=L.map(e=>{try{return p.createFromJson(e)}catch(t){return console.error("createFromJSON",t),null}}).filter(e=>e!==null);d.addObserver(e=>{T(e),localStorage.setItem("todoList",JSON.stringify(e))});d.setState(A);
